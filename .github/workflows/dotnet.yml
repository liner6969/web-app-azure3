name: .NET Build


on:
push:
branches: [ main ]
pull_request:
branches: [ main ]


jobs:
build:
runs-on: ubuntu-latest


steps:
- uses: actions/checkout@v4
- name: Setup .NET
uses: actions/setup-dotnet@v4
with:
dotnet-version: 8.0.x


- name: Restore
run: dotnet restore


- name: Build
run: dotnet build --configuration Release --no-restore


- name: Test
run: dotnet test --no-build --verbosity normal || true


- name: Publish Server
run: dotnet publish src/Server -c Release -o publish/server


- name: Publish Client
run: dotnet publish src/Client -c Release -o publish/client


- name: Upload artifact
uses: actions/upload-artifact@v4
with:
name: build-artifacts
path: publish
